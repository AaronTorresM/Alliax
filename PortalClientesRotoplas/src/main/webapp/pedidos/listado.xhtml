<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:c="http://java.sun.com/jsp/jstl/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	  xmlns:sec="http://www.springframework.org/security/tags">

<h:body>
	<ui:composition template="../templateBoot.xhtml">
		<ui:define name="content">
			<!-- Main Content -->
			<h:form id="form">
				<h:panelGroup layout="block" styleClass="container containerFiltersOne">
					<div class="accordion" id="myAccordion">
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block"
										  styleClass="col-lg-10 col-md-4 col-sm-4 col-xs-4-">
								<h2 class="colorTitulos">#{lblMain.pedidos}</h2>
							</h:panelGroup>
							<h:panelGroup layout="block"
										  styleClass="col-lg-2 col-md-6 col-sm-6 col-xs-6"
										  style="padding-top: 10px;">
								<h:panelGroup layout="block" style="text-align: right;">
									<h:commandLink action="crearPedido">
										<i class="fa fa-file fa-2x"></i>
										#{lblMain.crearPedido}
									</h:commandLink>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
						<h:inputHidden value="true">
							<f:validator binding="#{listadoPedidosValidator}" />
							<f:attribute name="frm_fechaIni" value="#{fechaInicial}" />
							<f:attribute name="frm_fechaFin" value="#{fechaFinal}" />
							<f:attribute name="frm_rangoDias" value="#{frm_rangoDias}" />
							<f:attribute name="frm_tipoDocumento" value="#{frm_tipoDocumento}" />
							<f:attribute name="frm_estatus" value="#{frm_estatus}" />
						</h:inputHidden>
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-12">
								<h:panelGroup layout="block" styleClass="card">
									<div id="item1Header"
										 class="card-header" data-toggle="collapse"
										 data-target="#expandable1" aria-expanded="true"
										 aria-controls="expandable1" type="button"
										 style="background-color: #236192;color: white;">
										<span class="accicon"><i class="fas fa-angle-down rotate-icon"></i></span>
										<h5 class="mb-0">#{lblMain.filtros}</h5>
									</div>
									<div id="expandable1"
										 class="collapse show" aria-labelledby="item1Header"
										 data-parent="#myAccordion">
										<h:panelGroup layout="block" styleClass="card-body">
											<h:panelGroup layout="block" styleClass="row">
												<h:panelGroup layout="block" styleClass="col-lg-4 col-md-4 col-sm-4 col-xs-12">
													<h:panelGroup layout="block" styleClass="form-group flex">
														<h:outputLabel for="frm_estatus" styleClass="labelLeftInput fillWidthAvaible">
															#{lblMain.estatus}
														</h:outputLabel>
														<h:selectOneMenu value="#{listaPedidos.estatus}" styleClass="form-control dropdownActive" required="true" id="frm_estatus" binding="#{frm_estatus}">
															<f:selectItems value="#{listaPedidos.catalogoEstatusSet}" var="estatus" itemValue="#{estatus.key}" itemLabel="#{estatus.value}" />
														</h:selectOneMenu>
													</h:panelGroup>
												</h:panelGroup>
												<h:panelGroup layout="block" styleClass="col-lg-4 col-md-4 col-sm-4 col-xs-12" >
													<h:panelGroup layout="block" styleClass="form-group flex">
														<h:outputLabel for="frm_rangoDias"
																	   styleClass="labelLeftInput fillWidthAvaible">
															#{lblMain.fecha}
														</h:outputLabel>
														<h:selectOneMenu id="frm_rangoDias" value="#{listaPedidos.rangoDias}" required="true" styleClass="form-control dropdownActive" binding="#{frm_rangoDias}">
															<f:selectItems value="#{listaPedidos.catalogoRangoFechasSet}" var="rango" itemValue="#{rango.key}" itemLabel="#{rango.value}" />
															<f:ajax execute="@this" render=":boxFechaI :boxfechaF @all"/>
														</h:selectOneMenu>
													</h:panelGroup>
												</h:panelGroup>

												<h:panelGroup id="boxFechaI" layout="block"  styleClass="col-lg-4 col-md-4 col-sm-4 col-xs-12" rendered="#{listaPedidos.rangoDias eq 'F' || listaPedidos.rangoDias eq 'P'}">
													<h:panelGroup layout="block"  styleClass="form-group flex">
														<h:outputLabel for="frm_fechaIni"
																	   styleClass="labelLeftInput fillWidthAvaible">
															#{lblMain.fechaI}
														</h:outputLabel>
														<h:panelGroup layout="block"
																	  styleClass="input-group date date-start">
															<h:inputText id="frm_fechaIni"
																		 styleClass="form-control" required="true" requiredMessage="#{lblMain.fechaRequerido}"/>
															<h:inputHidden id="frm_fechaIniAlt" name="frm_fechaIniAlt" value="#{listaPedidos.fechaInicial}" requiredMessage="#{lblMain.fechaRequerido}" binding="#{fechaInicial}" />
															<h:panelGroup layout="block" styleClass="input-group-append">
																<span class="input-group-text far fa-calendar-alt"></span>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
												<h:panelGroup id="boxFechaF" layout="block"  styleClass="col-lg-4 col-md-4 col-sm-4 col-xs-12" rendered="#{listaPedidos.rangoDias eq 'P'}" >
													<h:panelGroup layout="block" styleClass="form-group flex" >
														<h:outputLabel for="frm_fechaFin"
																	   styleClass="labelLeftInput fillWidthAvaible">
															#{lblMain.fechaF}
														</h:outputLabel>
														<h:panelGroup layout="block"
																	  styleClass="input-group date date-end">
															<h:inputText id="frm_fechaFin"
																		 styleClass="form-control" required="true" />
															<h:inputHidden id="frm_fechaFinAlt" value="#{listaPedidos.fechaFinal}" requiredMessage="#{lblMain.fechaRequerido}" binding="#{fechaFinal}" />
															<h:panelGroup layout="block" styleClass="input-group-append">
																<span class="input-group-text far fa-calendar-alt"></span>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
												<h:panelGroup layout="block" styleClass="col-lg-4 col-md-4 col-sm-4 col-xs-12">
													<h:panelGroup layout="block" styleClass="form-group flex">
														<h:outputLabel for="frm_tipoDocumento"
																	   styleClass="labelLeftInput fillWidthAvaible">
															#{lblMain.por}
														</h:outputLabel>
														<h:selectOneMenu styleClass="form-control dropdownActive" value="#{listaPedidos.tipoDocumento}"
																		 id="frm_tipoDocumento" binding="#{frm_tipoDocumento}">
															<f:selectItem itemValue="#{lblMain.pedido}" itemLabel="#{lblMain.pedido}" />
															<f:selectItem itemValue="#{lblMain.docComercial}" itemLabel="#{lblMain.docComercial}" />
														</h:selectOneMenu>
													</h:panelGroup>
												</h:panelGroup>
												<h:panelGroup layout="block" styleClass="col-lg-4 col-md-4 col-sm-4 col-xs-12">
													<h:panelGroup layout="block" styleClass="form-group flex">
														<h:outputLabel
																styleClass="labelLeftInput fillWidthAvaible">
															#{lblMain.documento}
														</h:outputLabel>
														<h:inputText value="#{listaPedidos.documento}" styleClass="form-control" />
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="row">
												<h:panelGroup layout="block" styleClass="col-lg-12 col-md-12 col-sm-12 col-xs-12">
													<h:commandButton action="#{listaPedidos.buscaPedidos}"
																	 styleClass="btn btn-primary float-right"
																	 value="#{lblMain.aplicarFiltro}" id="setFilters" >
														<f:ajax execute=":validate @form" render="@this :tab1 :example" />
													</h:commandButton>
												</h:panelGroup>
											</h:panelGroup>
										</h:panelGroup>
									</div>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row hidden exampleContent">
							<h:panelGroup layout="block" styleClass="col-12">
								<h:panelGroup layout="block" styleClass="card text-center" >
									<h:panelGroup layout="block" styleClass="card-body" >
										<table id="example" class="table table-striped  table-hover" width="100%">
											<thead>
											<tr>
												<th>Doc. comercial</th>
												<th>Orden de compra</th>
												<th>Monto</th>
												<th>Creado</th>
												<th>Estatus</th>
												<th>Destino</th>
											</tr>
											</thead>
											<tbody>
											<ui:repeat var="pedido" value="#{listaPedidos.listadoPedidos}">
												<tr styleClass="tr:hover{text-color: white}">
													<td>
														<h:commandLink style="text-decoration: none; color: black;" styleClass="colorLetra" >
															<h:outputLabel value="#{pedido.documentoComercial}" />
															<f:setPropertyActionListener value="#{pedido}" target="#{sessionScope.pedidoSel}" />
															<f:ajax execute="@this" render=":modal" immediate="true"/>
														</h:commandLink>
													</td>
													<td>
														<h:commandLink style="text-decoration: none; color: black;" styleClass="colorLetra" >
															<h:outputLabel value="#{pedido.pedidoCliente}" />
															<f:setPropertyActionListener value="#{pedido}" target="#{sessionScope.pedidoSel}" />
															<f:ajax execute="@this" render=":modal" immediate="true"/>
														</h:commandLink></td>
													<td>
														<h:commandLink style="text-decoration: none; color: black;" styleClass="colorLetra" >
															<h:outputLabel value="#{pedido.monto}">
																<f:convertNumber currencySymbol="$" type="currency" locale="es_MX"/>
															</h:outputLabel>
															<f:setPropertyActionListener value="#{pedido}" target="#{sessionScope.pedidoSel}" />
															<f:ajax execute="@this" render=":modal" immediate="true"/>
														</h:commandLink>
													</td>
													<td>
														<h:commandLink style="text-decoration: none; color: black;" styleClass="colorLetra" >
															<h:outputLabel value="#{pedido.fechaCreacion}">
																<f:convertDateTime dateStyle="default" />
															</h:outputLabel>
															<f:setPropertyActionListener value="#{pedido}" target="#{sessionScope.pedidoSel}" />
															<f:ajax execute="@this" render=":modal" immediate="true"/>
														</h:commandLink>
													</td>
													<td>
														<h:commandLink style="text-decoration: none; color: black;" styleClass="colorLetra" >
															<h:outputLabel value="#{pedido.estatusGeneralDes}" />
															<f:setPropertyActionListener value="#{pedido}" target="#{sessionScope.pedidoSel}" />
															<f:ajax execute="@this" render=":modal" immediate="true"/>
														</h:commandLink>
													</td>
													<td>
														<h:commandLink style="text-decoration: none; color: black;" styleClass="colorLetra" >
															<h:outputLabel value="#{pedido.destinatario}" />
															<f:setPropertyActionListener value="#{pedido}" target="#{sessionScope.pedidoSel}" />
															<f:ajax execute="@this" render=":modal" immediate="true" />
														</h:commandLink>
													</td>
												</tr>
											</ui:repeat>
											</tbody>
										</table>
									</h:panelGroup>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</div>
				</h:panelGroup>
				<!-- End of Main Content -->
				<f:view id="modal" >
					<c:when test="#{not empty sessionScope and not empty listaPedidos.listadoPedidos}">
						<f:metadata>
							<f:viewAction action="#{detalle.cargaDetallePartidas}" onPostback="true" if="#{not empty sessionScope.pedidoSel}"/>
						</f:metadata>
					</c:when>
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
						 aria-labelledby="myModal">
						<h:panelGroup layout="block"
									  styleClass="modal-dialog modal-dialog-scrollable modal-xl modal-xxx"
									  role="document" >
							<h:panelGroup layout="block" styleClass="modal-content">

								<!-- Modal Header -->
								<h:panelGroup layout="block" styleClass="modal-header">
									<h4 class="modal-title">#{lblMain.informacionGeneral}</h4>
									<h:commandButton styleClass="close" value="X" onclick="closeModal()" style="border: none; background: none;">
										<f:setPropertyActionListener value="#{null}" target="#{sessionScope.pedidoSel}"/>
										<f:ajax execute="@this"></f:ajax>
									</h:commandButton>
								</h:panelGroup>

								<!-- Modal body -->
								<h:panelGroup layout="block" styleClass="modal-body">
									<h:panelGroup layout="block" styleClass="container-fluid">
										<h:panelGroup layout="block" styleClass="row">
											<h:panelGroup layout="block" styleClass="col-lg-3 mb-4">
												<h:panelGroup layout="block"
															  styleClass="card border-left-primary shadow h-100 py-2">
													<h:panelGroup layout="block" styleClass="card-body">
														<h:panelGroup layout="block"
																	  styleClass="row no-gutters align-items-center">
															<h:panelGroup layout="block" styleClass="col mr-3">
																<h:panelGroup layout="block"
																			  styleClass="text-md font-weight-bold text-primary  mb-1">
																	#{lblMain.docComercial}
																</h:panelGroup>
																<h:panelGroup layout="block"
																			  styleClass="h6 mb-0 font-weight-bold text-gray-800">
																	<h:outputLabel value="#{detalle.pedido.documentoComercial}" />
																</h:panelGroup>
															</h:panelGroup>
															<h:panelGroup layout="block" styleClass="col-auto">
																<i class="fas fa-file-alt fa-3x text-gray-300"></i>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-lg-3 mb-4">
												<h:panelGroup layout="block"
															  styleClass="card border-left-primary shadow h-100 py-2">
													<h:panelGroup layout="block" styleClass="card-body">
														<h:panelGroup layout="block"
																	  styleClass="row no-gutters align-items-center">
															<h:panelGroup layout="block" styleClass="col mr-2">
																<h:panelGroup layout="block"
																			  styleClass="text-md font-weight-bold text-primary  mb-1">
																	#{lblMain.pedido}
																</h:panelGroup>
																<h:panelGroup layout="block"
																			  styleClass="h6 mb-0 font-weight-bold text-gray-800">
																	<h:outputLabel value="#{detalle.pedido.pedidoCliente}" />
																</h:panelGroup>
															</h:panelGroup>
															<h:panelGroup layout="block" styleClass="col-auto">
																<i class="fas fa-clipboard-list fa-3x text-gray-300" />
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-lg-3 mb-4">
												<h:panelGroup layout="block"
															  styleClass="card border-left-primary shadow h-100 py-2">
													<h:panelGroup layout="block" styleClass="card-body">
														<h:panelGroup layout="block"
																	  styleClass="row no-gutters align-items-center">
															<h:panelGroup layout="block" styleClass="col mr-2">
																<h:panelGroup layout="block"
																			  styleClass="text-md font-weight-bold text-primary mb-1">#{lblMain.fechaCreacion}
																</h:panelGroup>
																<h:panelGroup layout="block"
																			  styleClass="h6 mb-0 font-weight-bold text-gray-800">
																	<h:outputLabel value="#{detalle.pedido.fechaCreacion}" >
																		<f:convertDateTime dateStyle="default" />
																	</h:outputLabel>
																</h:panelGroup>
															</h:panelGroup>
															<h:panelGroup layout="block" styleClass="col-auto">
																<i class="fas fa-calendar-alt fa-3x text-gray-300"></i>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-lg-3 mb-4">
												<h:panelGroup layout="block"
															  styleClass="card border-left-primary shadow h-100 py-2">
													<h:panelGroup layout="block" styleClass="card-body">
														<h:panelGroup layout="block"
																	  styleClass="row no-gutters align-items-center">
															<h:panelGroup layout="block" styleClass="col mr-2">
																<h:panelGroup layout="block"
																			  styleClass="text-md font-weight-bold text-primary  mb-1">#{lblMain.monto}</h:panelGroup>
																<h:panelGroup layout="block"
																			  styleClass="h6 mb-0 font-weight-bold text-gray-800">
																	<h:outputLabel value="#{detalle.pedido.monto}">
																		<f:convertNumber currencySymbol="$" type="currency" locale="es_MX"/>
																	</h:outputLabel> #{detalle.pedido.moneda}
																</h:panelGroup>
															</h:panelGroup>
															<h:panelGroup layout="block" styleClass="col-auto">
																<i class="fas fa-dollar-sign fa-3x text-gray-300"></i>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-lg-3 mb-4">
												<h:panelGroup layout="block"
															  styleClass="card border-left-primary shadow h-100 py-2">
													<h:panelGroup layout="block" styleClass="card-body">
														<h:panelGroup layout="block"
																	  styleClass="row no-gutters align-items-center">
															<h:panelGroup layout="block" styleClass="col mr-2">
																<h:panelGroup layout="block"
																			  styleClass="text-md font-weight-bold text-primary  mb-1">#{lblMain.estatus}
																</h:panelGroup>
																<h:panelGroup layout="block"
																			  styleClass="h6 mb-0 font-weight-bold text-gray-800">
																	#{detalle.pedido.estatusGeneralDes}
																</h:panelGroup>
															</h:panelGroup>
															<h:panelGroup layout="block" styleClass="col-auto">
																<i class="fas fa-calendar-check	 fa-3x text-gray-300"></i>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-lg-9 mb-4">
												<h:panelGroup layout="block"
															  styleClass="card border-left-primary shadow h-100 py-2">
													<h:panelGroup layout="block" styleClass="card-body">
														<h:panelGroup layout="block"
																	  styleClass="row no-gutters align-items-center">
															<h:panelGroup layout="block" styleClass="col mr-2">
																<h:panelGroup layout="block"
																			  styleClass="text-md font-weight-bold text-primary  mb-1">#{lblMain.destinatario}
																</h:panelGroup>
																<h:panelGroup layout="block"
																			  styleClass="h6 mb-0 font-weight-bold text-gray-800">
																	<h:outputLabel value="#{detalle.pedido.destinatario}" />
																</h:panelGroup>
															</h:panelGroup>
															<h:panelGroup layout="block" styleClass="col-auto">
																<i class="fas fa-shipping-fast fa-3x text-gray-300"></i>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="row">
											<h:panelGroup layout="block"
														  styleClass="col-xl-12 col-lg-12 col-md-12 col-sm-12">
												<h:panelGroup layput="block"
															  style="display: inline-block; width: 100%; overflow-y: auto;">
													<h:commandButton id="clonarPedido" styleClass="btn btn-primary float-left" action="crearPedido.xhtml?faces-redirect=true" value ="#{lblMain.btnCopiarPedido}">
														<f:setPropertyActionListener value="#{detalle.pedido}" target="#{sessionScope.pedidoSel}" />
													</h:commandButton>
													<ul class="timeline" id="timeline">
														<li class="li #{detalle.pedido.estatusGeneral eq 'VSAC' ? 'complete' : ''}"><h:panelGroup layout="block"
																																				  class="status">
															<h4>#{lblMain.Vsac}</h4>
														</h:panelGroup></li>
														<li class="li #{detalle.pedido.estatusGeneral eq 'RELE' ? 'complete' : ''}"><h:panelGroup layout="block"
																																				  class="status">
															<h4>#{lblMain.Rele}</h4>
														</h:panelGroup></li>
														<li class="li #{detalle.pedido.estatusGeneral eq 'PROC' ? 'complete' : ''}"><h:panelGroup layout="block"
																																				  class="status">
															<h4>#{lblMain.Proc}</h4>
														</h:panelGroup></li>
														<li class="li #{detalle.pedido.estatusGeneral eq 'PINV' ? 'complete' : ''}"><h:panelGroup layout="block"
																																				  class="status">
															<h4>#{lblMain.Pinv}</h4>
														</h:panelGroup></li>
														<li class="li #{detalle.pedido.estatusGeneral eq 'CONC' ? 'complete' : ''}"><h:panelGroup layout="block"
																																				  class="status">
															<h4>#{lblMain.Conc}</h4>
														</h:panelGroup></li>
														<li class="li #{detalle.pedido.estatusGeneral eq 'COMP' ? 'complete' : ''}"><h:panelGroup layout="block"
																																				  class="status">
															<h4>#{lblMain.Comp}</h4>
														</h:panelGroup></li>
													</ul>
												</h:panelGroup>
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<br />
									<h:panelGroup layout="block" styleClass="card text-center">
										<h:panelGroup layout="block" styleClass="card-header">
											<ul class="nav nav-tabs card-header-tabs">
												<li class="nav-item"><a class="nav-link active"
																		href="#menu1">#{lblMain.partidas}</a></li>
												<li class="nav-item"><a class="nav-link "
																		href="#menu2">#{lblMain.facturas}
													<f:ajax listener="#{detalle.obtieneFacturas}" event="click" execute="@this"/>
												</a></li>
											</ul>
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="card-body">
											<h:panelGroup layout="block" id="nav-tabContent"
														  styleClass="tab-content">
												<div id="menu1"
													 class="tab-pane active ">
													<br />
													<h:panelGroup layout="block" styleClass="row">
														<h:panelGroup layout="block" styleClass="col-12">
															<table id="example2" class="table table-striped  table-hover" width="100%">
																<thead>
																<tr>
																	<th>#{lblMain.posicionSm}</th>
																	<th>#{lblMain.noMaterialSm}</th>
																	<th>#{lblMain.descripcion}</th>
																	<th>#{lblMain.cantidadSm}</th>
																	<th>#{lblMain.cantEntregadaSm}</th>
																	<th>#{lblMain.unidadMedida}</th>
																	<th>#{lblMain.monto}</th>
																	<th>#{lblMain.precioNeto}</th>
																	<th>#{lblMain.fechaEntregaSm}</th>
																	<th>#{lblMain.estatus}</th>
																</tr>
																</thead>
																<tbody>
																<ui:repeat value="#{detalle.partidas}" var="partida">
																	<tr>
																		<td><h:outputLabel value="#{partida.posicion}" /></td>
																		<td><h:outputLabel value="#{partida.noMaterial}" /></td>
																		<td><h:outputLabel value="#{partida.descripcion}" /></td>
																		<td><h:outputLabel value="#{partida.cantidadStr}" /></td>
																		<td><h:outputLabel value="#{partida.cantidadEntregada}" /></td>
																		<td><h:outputLabel value="#{partida.unidadMedida}" /></td>
																		<td><h:outputLabel value="#{partida.monto}">
																			<f:convertNumber currencySymbol="$" type="currency" locale="es_MX"/>
																		</h:outputLabel> #{partida.moneda}</td>
																		<td><h:outputLabel value="#{partida.precioNeto}">
																			<f:convertNumber currencySymbol="$" type="currency" locale="es_MX"/>
																		</h:outputLabel> #{partida.moneda}</td>
																		<td><h:outputLabel value="#{partida.fechaEntrega}">
																			<f:convertDateTime dateStyle="default" />
																		</h:outputLabel></td>
																		<td><h:outputLabel value="#{partida.estatusGeneral}" /></td>
																	</tr>
																</ui:repeat>
																</tbody>
															</table>
														</h:panelGroup>
													</h:panelGroup>
												</div>
												<div id="menu2"
													 class="container-fluid tab-pane fade pr-0 pl-0">
													<br />
													<h:panelGroup layout="block" styleClass="row">
														<h:panelGroup layout="block" styleClass="col-12">
															<table id="example3" class="table table-striped  table-hover" width="100%">
																<thead>
																<tr>
																	<th>#{lblMain.docFactura}</th>
																	<th>#{lblMain.fecha}</th>
																	<th>#{lblMain.impuestoNeto}</th>
																	<th>#{lblMain.monto}</th>
																</tr>
																</thead>
																<tbody>
																<ui:repeat value="#{detalle.facturas}" var="factura">
																	<tr>
																		<td><h:outputLabel value="#{factura.docFactura}" /></td>
																		<td><h:outputLabel value="#{factura.fechaFactura}">
																			<f:convertDateTime dateStyle="default" />
																		</h:outputLabel></td>
																		<td><h:outputLabel value="#{factura.montoImp}">
																			<f:convertNumber currencySymbol="$" type="currency" locale="es_MX"/>
																		</h:outputLabel> #{factura.moneda}</td>
																		<td><h:outputLabel value="#{factura.montoNeto}">
																			<f:convertNumber currencySymbol="$" type="currency" locale="es_MX"/>
																		</h:outputLabel></td>
																	</tr>
																</ui:repeat>
																</tbody>
															</table>
														</h:panelGroup>
													</h:panelGroup>
												</div>
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<!-- Modal footer -->
									<h:panelGroup layout="block" styleClass="modal-footer">
										<h:panelGroup id = "panelDate">
											<h:outputText id="result1" value="#{lblMain.pedidoCancelado}" style="font-weight:bold;" rendered="#{detalle.pedidoCancelado=='0'}"/>
											<h:outputText id="result2" value="#{lblMain.pedidoNoCancelado}" style="font-weight:bold;" rendered="#{detalle.pedidoCancelado=='1'}"/>
									
											<!-- disabled="#{detalle.pedido.estatusGeneral eq 'Vsac' or detalle.pedido.estatusGeneral eq 'Rele' ? 'false' : 'true'}"  -->
									
											<h:commandButton rendered="#{detalle.pedidoCancelado!='0'}" styleClass="btn btn-primary" 
											value="#{lblMain.btnCancelarPedido}" onclick="openModalCancelarPedido()">
											<f:ajax execute="@this" render=":modal1" />
											</h:commandButton>
										</h:panelGroup>
									  		
										<h:commandButton styleClass="btn btn-danger" value="#{lblMain.btnCerrar}" onclick="closeModal()">
											<f:setPropertyActionListener value="#{null}" target="#{sessionScope.pedidoSel}" />
											<f:ajax execute="@this" render=":modal" />
										</h:commandButton>
									</h:panelGroup>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</div>
				</f:view>
				
				<f:view id="modal1" >
					<div class="modal fade" id="myModal1" aria-labelledby="myModal1">
					<h:panelGroup style="padding:10% 33% 20% 33%;" layout="block"
						styleClass="modal-dialog modal-dialog-scrollable modal-xl modal-xxx" >
						<h:panelGroup layout="block" styleClass="modal-content">
							<h:panelGroup layout="block" styleClass="modal-header">
								<h2 class="address" style="font-size: 18px;">#{lblMain.confirmacion}</h2>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="modal-body" style="font-size: 14px;">
							#{lblMain.cancelarPedidosConfirmacion}
								<br />
								<h:panelGroup layout="block" styleClass="modal-footer">
									<h:commandButton action="#{detalle.cancelarPedido(detalle.pedido.pedidoCliente)}" 
									id="cancelarSi" styleClass="btn btn-primary" value="#{lblMain.btnAceptar}" onclick="closeModalCancelarPedido()">
													<f:ajax execute="cancelarSi" render="panelDate" />
									</h:commandButton>
									<h:commandButton styleClass="btn btn-danger" value="#{lblMain.btnCancelar}" onclick="closeModalCancelarPedido()">
										<f:ajax execute="@this" render=":modal1" />
									</h:commandButton>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</div>
			</f:view>
				
			</h:form>
		</ui:define>
		<ui:define name="scriptJS">
			<script type="text/javascript">

				var closeModal = function () {
					$('#myModal').modal('hide');
				}
				
				var openModalCancelarPedido = function () {
					$('#myModal1').modal('show');
				}
				var closeModalCancelarPedido = function () {
					$('#myModal1').modal('hide');
				}

				$("#menu2").off().on('click', function () {
					if ($dataT3) {
						$dataT3.clear().destroy();
					}
					example3Func();
				});
			</script>
			<script src="#{resource['lookAndFeel/js/tabla.js']}"></script>
		</ui:define>
	</ui:composition>
</h:body>

</html>