<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:body>
	<ui:composition template="../templateBoot_bak.xhtml">
		<ui:define name="metadata">
		</ui:define>


		<ui:define name="titulo">#{lblMain.ttlEstadoCuenta}</ui:define>

		<ui:define name="breadcrumb">
			<li>#{lblMain.ttlEstadoCuenta}</li>
		</ui:define>

		<ui:define name="contenido">

			<h:panelGroup layout="block">
				<h:panelGroup layout="block" styleClass="container">
					<ui:remove>
						<h3>#{lblMain.registrosPendientes}</h3>
					</ui:remove>
					<h:form id="form" styleClass="form-inline">
						<style>
.dropdown-menu.typeahead {
	top: 53px;
	left: 19px;
	display: block;
	background-color: #fff !important;
}
</style>
						<script charset="utf8"
							src="/PortalClientes/js/bootstrap3-typeahead.min.js"></script>
						<script>					
						
				        
						$(document).ready(function() {
							var data = {status:"success"}
							btnBuscar(data);							
							
							//Order dates
							$("#form\\:listadoEdoCta tbody tr label[for$=orderDate]").each(function (index){
								$(this).parent().attr("data-sort", $(this).html().split("/").reverse().join("") );								
							});
							//Order importes
							$("#form\\:listadoEdoCta tbody tr label[for$=orderImporte]").each(function (index){
								$(this).parent().attr("data-sort", parseFloat( $(this).html().replace(',','')
										                                                     .replace('.','')
										                                                     .replace('R$ ','')
										                                                     .replace('$','')
										                                                     .replace('S/','') ) );								
// 							    if( $('#form\\:paisHidden').val() === 'AR' || $('#form\\:paisHidden').val() === 'GT' || $('#form\\:paisHidden').val() === 'SV' || $('#form\\:paisHidden').val() === 'HN' || $('#form\\:paisHidden').val() === 'NI' || $('#form\\:paisHidden').val() === 'CR' ){						    	
							    	$(this).parent().attr("class","align-right");
// 							    }								
							});							
							//Build dataTable
						    $('#form\\:listadoEdoCta').DataTable({
						    	paging:   false,
						    	order:    [],
								language: {
									search: "#{lblMain.busquedaOTable} ",
									sInfo:	"#{lblMain.registrosOTable}"
								}
						    });
						    
						    //Alinear a la derecha
// 						    if( $('#form\\:paisHidden').val() === 'AR' || $('#form\\:paisHidden').val() === 'GT' || $('#form\\:paisHidden').val() === 'SV' || $('#form\\:paisHidden').val() === 'HN' || $('#form\\:paisHidden').val() === 'NI' || $('#form\\:paisHidden').val() === 'CR' || $('#form\\:paisHidden').val() === 'BR' ){						    	
						    	$('.derecha').addClass("align-right");
// 						    }						    						    						 
						    
						    //Autocomplete Cliente
						    var clienteList = new Array();
						    $.getJSON( 'JSONClienteList.xhtml', null,
						        function ( jsonData )
						        {
						            $.each( jsonData, function ( index, cliente )
						            {
						            	clienteList.push(cliente);
						            } );			
						            $( '#form\\:noCliente' ).typeahead( { source:clienteList,
						                                         autoSelect:true,
																 hint: true,
																 highlight: true,
																 minLength: 2,
																 afterSelect: function(data){																		
																	$('#form\\:noCliente').val(data.id);
																 }						            
															  });
						            $('#form\\:noCliente').focus();
						    });						    						    
						    
							//pieChart
							var ctx = document.getElementById('chart-area').getContext('2d');						
							window.myPie = new Chart(ctx, pieChart);
						} );
						
						function btnBuscar(data){
							if(data.status === 'success'){
								$.datepicker.setDefaults( $.datepicker.regional["en"] );
								$('#form\\:frm_fechaCorte').datepicker({
									defaultDate: "+0w",
					          	   	dateFormat: "dd/mm/yy",
					          	  	altFormat: "yymmdd",
					          	  	altField: "#form\\:frm_fechaCorteAlt",
									changeMonth: false,
									numberOfMonths: 1
								});
														
								$('#form\\:frm_fechaFinal').datepicker({
									defaultDate: "+1w",
					          	   	dateFormat: "dd/mm/yy",
					          	  	altFormat: "yymmdd",
					          	  	altField: "#form\\:frm_fechaFinalHD",
									changeMonth: false,
									numberOfMonths: 1	
								});									
							}
						}
						
						var pieChart = {
								type: 'pie',
								data: {
									labels:['#{lblMain.vencidoGrafica}',
										    '#{lblMain.avencerGrafica}'],
									datasets: [{
											data: [#{edoCta.estadoCuenta.saldoVencido},#{edoCta.estadoCuenta.saldoVencer}],
											backgroundColor: ['#FE1F29','#9dc678']
										}]	
									},
								options: {
									title: {
											display: true,
									        text: '#{lblMain.saldoGrafica}',
											fontSize: 16
										},
								    tooltips: {
							                enabled: true,
							                mode: 'single',
							                callbacks: {
							                    label: function(tooltipItem, data) {
												    var label = data.labels[tooltipItem.index] + ': #{edoCta.getSimboloPesos()}';
													var value = (data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") ; 	
							                        return label + value ;
							                    }
							                }
							            },
									legend: {
											position: 'right',
											labels: {
													boxWidth: 12,
													padding: 5
												}
										},
									animation: {
											duration: 1300
									}
								}
							};
					</script>


						<h:inputHidden id="paisHidden" value="#{edoCta.estadoCuenta.pais}" />
						<h:inputHidden id="userPeruHidden" value="#{edoCta.usrPeru}" />

						<ui:remove>
							<h:inputHidden value="true">
								<f:validator binding="#{listadoPedidosValidator}" />
								<f:attribute name="frm_fechaIni" value="#{fechaInicial}" />
								<f:attribute name="frm_fechaFin" value="#{fechaFinal}" />
								<f:attribute name="frm_rangoDias" value="#{frm_rangoDias}" />
								<f:attribute name="frm_tipoDocumento"
									value="#{frm_tipoDocumento}" />
							</h:inputHidden>
						</ui:remove>

						<h:panelGroup id="filtrosBox" layout="block"
							styleClass="form-inline">
							<h:panelGroup layout="block" styleClass="form-group"
								style="margin: 10px 0px 10px 10px;"
								rendered="#{edoCta.usrVentas}">
								<h:outputText value="#{lblMain.noCliente}" />
								<br />
								<h:inputText label="#{lblMain.noCliente}"
									value="#{edoCta.noCliente}" id="noCliente"
									styleClass="form-control input-sm" style="margin-right: 10px;"
									autocomplete="off">
									<f:validateLength minimum="5" maximum="16" />
								</h:inputText>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="form-group"
								style="margin: 10px 0px 10px 10px;"
								rendered="#{edoCta.usrVentas}">
								<h:commandButton value="#{lblMain.btnBuscar}"
									styleClass="btn btn-default">
									<f:ajax listener="#{edoCta.buscaCliente}" event="click"
										execute="noCliente" render="form" onevent="btnBuscar"></f:ajax>
								</h:commandButton>&nbsp;								
						</h:panelGroup>


							<h:panelGroup layout="block" styleClass="form-group"
								rendered="#{not empty edoCta.clienteCompanySet}">
								<h:outputLabel value="#{lblMain.empresa}"
									style="margin-right: 5px;" />
								<h:selectOneMenu value="#{edoCta.empresa}" required="true"
									styleClass="form-control input-sm" style="margin-right: 10px;">
									<f:selectItems value="#{edoCta.clienteCompanySet}" var="emp"
										itemValue="#{emp.key}" itemLabel="#{emp.value}" />
								</h:selectOneMenu>
							</h:panelGroup>


							<h:panelGroup layout="block" styleClass="form-group"
								rendered="#{not empty edoCta.clienteCompanySet}">
								<h:outputLabel value="#{lblMain.fechaCorte}"
									style="margin-right: 5px;" />
								<h:inputText id="frm_fechaCorte"
									styleClass="form-control input-sm"
									value="#{edoCta.fechaCorteShow}"
									style="margin-right: 0px; width: 90px;" autocomplete="off" />
								<h:inputHidden id="frm_fechaCorteAlt" name="frm_fechaCorteAlt"
									value="#{edoCta.fechaCorte}" />
							</h:panelGroup>

							<h:panelGroup layout="block" styleClass="form-group"
								rendered="#{not empty edoCta.clienteCompanySet}">
								<h:commandButton action="#{edoCta.generarEstadoCuenta}"
									value="#{lblMain.btnGenerar}" styleClass="btn btn-primary"
									render="pieChart">
								</h:commandButton>
							</h:panelGroup>



							<h:panelGroup layout="block" styleClass="form-group"
								style="margin-left:100px;" rendered="#{edoCta.usrPeru}">
								<br></br>

							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="form-group"
								style="margin-left:375px;"
								rendered="#{template.usuarioLogueado.pais == 'PE'}">
								<br></br>
								<span><b>Link de facturación: </b></span>
								<a href="http://eol.pe/">http://eol.pe/</a>
								<br></br>
								<span><b>Teléfono: </b> 614 2424 opción 6</span>
								<br></br>
								<span><b>Correo: </b><a
									href="mailto:cobranzas.pe@rotoplas.com">cobranzas.pe@rotoplas.com</a></span>
								<br></br>
								<span><b>Cuenta BCP: </b> 191 1068707 0 18</span>
							</h:panelGroup>


						</h:panelGroup>

						<h:panelGroup
							rendered="#{empty edoCta.detalle and not empty edoCta.mensajeError}"
							layout="block" style="margin-top:10px;">
							<h:outputText value="#{edoCta.mensajeError}"
								style="font-weight:bold;" />
						</h:panelGroup>

						<h:panelGroup layout="block" styleClass="col-lg-12 form-group"
							rendered="#{not empty edoCta.detalle}">
							<h:panelGroup layout="block" styleClass="col-lg-8 form-group">
								<h:panelGroup styleClass="row">
									<h:panelGroup layout="block" styleClass="col-md-12 form-group">

										<h:panelGroup styleClass="col-md-12" style="text-color:black;">
											<h:outputLabel value="#{edoCta.estadoCuenta.nombre} "
												style="text-color:black;" />
											<h:outputLabel value="#{edoCta.estadoCuenta.nombre2}"
												style="text-color:black;" />
											<h:outputLabel value="#{edoCta.estadoCuenta.nombre3} "
												style="text-color:black;" />
											<h:outputLabel value="#{edoCta.estadoCuenta.nombre4}"
												style="text-color:black;" />
										</h:panelGroup>

									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-lg-6 form-group">
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">

											<h:panelGroup styleClass="col-md-4">
												<h:outputText value="#{lblMain.cliente}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText value="#{edoCta.estadoCuenta.numCliente}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-4">
												<h:outputText
													value="#{edoCta.getRFCLabel( edoCta.estadoCuenta.pais )}:"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText value="#{edoCta.estadoCuenta.rfc}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-4">
												<h:outputText value="#{lblMain.telefono}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText value="#{edoCta.estadoCuenta.tel}" />

											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-4">
												<h:outputText value="#{lblMain.correos}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText
													value="#{fn:replace(edoCta.estadoCuenta.eMail,';','&lt;br/&gt;')}"
													escape="false" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup rendered="#{edoCta.estadoCuenta.pais != 'BR'}">
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-4">
												<h:outputText value="#{lblMain.monedaEdoCta}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText value="#{edoCta.estadoCuenta.moneda}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup styleClass="row">
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-4">
												<h:outputText value="" style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText value="" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-4">
												<h:outputText value="" style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText value="" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-4">
												<h:outputText value="" style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-8">
												<h:outputText value="" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
								</h:panelGroup>

								<h:panelGroup layout="block" styleClass="col-lg-6 form-group">
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6">
												<h:outputText value="#{lblMain.limiteCredito}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha">
												<h:outputText
													value="#{edoCta.getMontoFormateado( edoCta.estadoCuenta.limiteCredito )}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6">
												<h:outputText value="#{lblMain.vencido}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha">
												<h:outputText
													value="#{edoCta.getMontoFormateado( edoCta.estadoCuenta.saldoVencido )}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6">
												<h:outputText value="#{lblMain.vencer}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha">
												<h:outputText
													value="#{edoCta.getMontoFormateado( edoCta.estadoCuenta.saldoVencer )}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6">
												<h:outputText value="#{lblMain.saldoTotal}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha">
												<h:outputText
													value="#{edoCta.getMontoFormateado( edoCta.estadoCuenta.total )}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6">
												<h:outputText value="#{lblMain.disponible}"
													style="font-weight: bold;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha">
												<h:outputText
													value="#{edoCta.getMontoFormateado( edoCta.estadoCuenta.creditoDisponible )}" />
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup styleClass="row">
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6"
												style="border-top:1px solid black;">
												<h:outputText value="#{lblMain.fechaCorte}" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha"
												style="border-top:1px solid black;">
												<h:outputText id="lbl_fechaCorte"
													value="#{edoCta.estadoCuenta.fechaCorte}">
													<f:convertDateTime pattern="dd/MM/yyyy" />
												</h:outputText>
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6">
												<h:outputText value="#{lblMain.fechaConsulta}" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha">
												<h:outputText value="#{edoCta.fechaConsulta}"
													style="font-weight: bold;">
													<f:convertDateTime pattern="dd/MM/yyyy" />
												</h:outputText>
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>
									<h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-12 form-group">
											<h:panelGroup styleClass="col-md-6">
												<h:outputText value="#{lblMain.horaConsulta}"
													style="color:red !important;" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-md-6 derecha">
												<h:outputText value="#{edoCta.horaConsulta}"
													style="font-weight: bold; color:red !important;">
													<f:convertDateTime pattern="hh:mm:ss" />
												</h:outputText>
											</h:panelGroup>
										</h:panelGroup>
									</h:panelGroup>

								</h:panelGroup>

								<h:panelGroup layout="block" styleClass="row">
								</h:panelGroup>
								<br></br>
								<h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-12 form-group">
										<h:panelGroup styleClass="col-md-3">
											<h:commandLink
												actionListener="#{edoCta.decargarXlsxListadoPagos}"
												value="#{lblMain.descargarXLS}" immediate="true"
												target="_blank">&nbsp; 
								        	<h:graphicImage library="images" name="excel.jpg"
													style="width: 20px; height: 20px;" alt="clickDetalle" />
											</h:commandLink>
										</h:panelGroup>
										<h:panelGroup styleClass="col-md-3">
											<h:commandLink actionListener="#{edoCta.descargaPdf}"
												value="#{lblMain.descargarPdf}" immediate="true"
												target="_blank">&nbsp; 
								        	<h:graphicImage library="images"
													name="pdf-icon-sheet.png"
													style="width: 20px; height: 20px;" alt="clickDetalle" />
											</h:commandLink>
										</h:panelGroup>
										<c:if
											test="#{edoCta.estadoCuenta.pais eq 'GT' or edoCta.estadoCuenta.pais eq 'SV' or edoCta.estadoCuenta.pais eq 'HN' or edoCta.estadoCuenta.pais eq 'NI' or edoCta.estadoCuenta.pais eq 'CR'}">
											<h:panelGroup styleClass="col-md-3">
												<a href="#" class="dropdown-toggle" data-toggle="modal"
													data-target="#myModal#{edoCta.estadoCuenta.pais}">
													Datos Bancarios <h:graphicImage library="images"
														name="info-icon.png" style="width: 20px; height: 20px;"
														alt="clickDetalle" />
												</a>
											</h:panelGroup>
										</c:if>
										<c:if test="#{edoCta.estadoCuenta.pais eq 'BR'}">
											<h:panelGroup styleClass="col-md-5">
												<h:outputLink value="https://boletosacqualimp.site"
													immediate="true" target="_blank">					
												Para emitir 2º via de boletos clique aqui
												<h:graphicImage library="images" name="info-icon.png"
														style="width: 20px; height: 20px;" alt="clickDetalle" />
												</h:outputLink>
											</h:panelGroup>
										</c:if>
										<h:panelGroup styleClass="col-md-3">
											<h:outputText value="">
											</h:outputText>
										</h:panelGroup>
									</h:panelGroup>
								</h:panelGroup>
							</h:panelGroup>

							<h:panelGroup styleClass="col-lg-4">

								<div class="chart-container" style="width: 400px">
									<canvas id="chart-area" role="img"></canvas>
								</div>
							</h:panelGroup>

						</h:panelGroup>



						<!-- Version standard -->
						<h:dataTable value="#{edoCta.detalle}" var="detalle"
							id="listadoEdoCta" class="table table-striped table-bordered"
							rendered="#{not empty edoCta.detalle}" style="margin-top: 20px;"
							columnClasses="tblCell10,tblCell10,tblCell10,tblCell10,tblCell20,tblCell5,tblCell5,tblCell10,tblCell10">

							<c:choose>
								<c:when test="#{edoCta.estadoCuenta.pais eq 'AR'}">
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.tipoDocumento}" />
										</f:facet>
										<h:outputLabel value="#{detalle.tipoDocumento}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.factFiscal}" />
										</f:facet>
										<h:outputLabel value="#{detalle.notaEntrega}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pdf}" />
										</f:facet>
										<h:commandLink
											actionListener="#{edoCta.descargaFacturaArgentina(detalle.noFactura, detalle.notaEntrega)}"
											immediate="true" target="_blank"
											rendered="#{detalle.noFactura != '' and detalle.notaEntrega != ''}">
											<h:graphicImage library="images" name="pdfIcon.gif" />
										</h:commandLink>
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.remito}" />
										</f:facet>
										<h:outputLabel value="#{detalle.noFactFiscal}" />
									</h:column>
								</c:when>
								<c:when test="#{edoCta.estadoCuenta.pais eq 'PE'}">
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.tipoDocumento}" />
										</f:facet>
										<h:outputLabel value="#{detalle.tipoDocumento}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:panelGroup layout="block" style="text-align:center;">
												<h:outputText value="#{lblMain.numeroFactura}" />
											</h:panelGroup>
										</f:facet>
										<h:outputLabel value="#{detalle.notaEntrega}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.numeroLetra}" />
										</f:facet>
										<h:outputLabel value="#{detalle.noPedido}"
											style="text-align:center;" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pedido}" />
										</f:facet>
										<h:outputLabel value="#{detalle.ordenCompra}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.numeroUnico}" />
										</f:facet>
										<h:outputLabel value="#{detalle.noFactFiscal}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.xml}" />
										</f:facet>
										<h:commandLink
											actionListener="#{edoCta.descargaFacturaPeru(detalle.notaEntrega, 'xml')}"
											immediate="true" target="_blank"
											rendered="#{detalle.notaEntrega != '' and (fn:startsWith(detalle.notaEntrega,'01-') or fn:startsWith(detalle.notaEntrega,'03-') or fn:startsWith(detalle.notaEntrega,'07-') or fn:startsWith(detalle.notaEntrega,'08-') )}">
											<h:graphicImage library="images" name="xmlIcon.gif" />
										</h:commandLink>
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pdf}" />
										</f:facet>
										<h:commandLink
											actionListener="#{edoCta.descargaFacturaPeru(detalle.notaEntrega, 'pdf')}"
											immediate="true" target="_blank"
											rendered="#{detalle.notaEntrega != '' and (fn:startsWith(detalle.notaEntrega,'01') or fn:startsWith(detalle.notaEntrega,'03') or fn:startsWith(detalle.notaEntrega,'07') or fn:startsWith(detalle.notaEntrega,'08') )}">
											<h:graphicImage library="images" name="pdfIcon.gif" />
										</h:commandLink>
									</h:column>
								</c:when>
								<c:when test="#{edoCta.estadoCuenta.pais eq 'GT'}">
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.tipoDocumento}" />
										</f:facet>
										<h:outputLabel value="#{detalle.tipoDocumento}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pedido}" />
										</f:facet>
										<h:outputLabel value="#{detalle.ordenCompra}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.noPedido}"
												style="text-align:center;" />
										</f:facet>
										<h:outputLabel value="#{detalle.noPedido}"
											style="text-align:center;" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.notaEntrega}" />
										</f:facet>
										<h:outputLabel value="#{detalle.entrega}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.numeroAutorizacionSAT}" />

										</f:facet>
										<h:outputLabel value="#{detalle.noFactFiscal}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.factSAP}" />
										</f:facet>
										<h:outputLabel value="#{detalle.noFactura}" />
									</h:column>
									<!-- 								<h:column> -->
									<!-- 									<f:facet name="header"> -->
									<!-- 										<h:outputText value="#{lblMain.xml}" /> -->
									<!-- 									</f:facet>								 -->
									<!-- 									<h:outputLink value="http://webrotoplas.ekomercio.com/WSRotoplas_XML_PDF/" immediate="true" target="_blank" rendered="#{detalle.noFactFiscal != ''}"> -->
									<!-- 										<f:param name="uuid" value="#{detalle.noFactFiscal}" /> -->
									<!-- 										<f:param name="file" value="xml" />								 -->
									<!-- 										<h:graphicImage library="images" name="xmlIcon.gif" /> -->
									<!-- 									</h:outputLink> -->
									<!-- 								</h:column> -->
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pdf}" />
										</f:facet>
										<h:outputLink
											value="https://report.feel.com.gt/ingfacereport/ingfacereport_documento?"
											immediate="true" target="_blank"
											rendered="#{detalle.noFactFiscal != ''}">
											<f:param name="uuid" value="#{detalle.noFactFiscal}" />
											<h:graphicImage library="images" name="pdfIcon.gif" />
										</h:outputLink>
									</h:column>
								</c:when>
								<c:when
									test="#{edoCta.estadoCuenta.pais eq 'SV' or edoCta.estadoCuenta.pais eq 'HN' or edoCta.estadoCuenta.pais eq 'NI'}">
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.tipoDocumento}" />
										</f:facet>
										<h:outputLabel value="#{detalle.tipoDocumento}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pedido}" />
										</f:facet>
										<h:outputLabel value="#{detalle.ordenCompra}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.noPedido}"
												style="text-align:center;" />
										</f:facet>
										<h:outputLabel value="#{detalle.noPedido}"
											style="text-align:center;" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.factFiscal}" />
										</f:facet>
										<h:outputLabel value="#{detalle.notaEntrega}" />
									</h:column>
								</c:when>
								<c:when test="#{edoCta.estadoCuenta.pais eq 'CR'}">
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.tipoDocumento}" />
										</f:facet>
										<h:outputLabel value="#{detalle.tipoDocumento}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pedido}" />
										</f:facet>
										<h:outputLabel value="#{detalle.ordenCompra}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.noPedido}"
												style="text-align:center;" />
										</f:facet>
										<h:outputLabel value="#{detalle.noPedido}"
											style="text-align:center;" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.factFiscal}" />
										</f:facet>
										<h:outputLabel value="#{detalle.noFactFiscal}" />
									</h:column>
									<!-- 								<h:column> -->
									<!-- 									<f:facet name="header"> -->
									<!-- 										<h:outputText value="#{lblMain.numeroAutorizacionSAT}" /> -->
									<!-- 									</f:facet> -->
									<!-- 									<h:outputLabel value="**TBD**" />  -->
									<!-- 								</h:column>								 -->
									<!-- 								<h:column> -->
									<!-- 									<f:facet name="header"> -->
									<!-- 										<h:outputText value="#{lblMain.xml}" /> -->
									<!-- 									</f:facet>								 -->
									<!-- 									<h:outputLink value="http://webrotoplas.ekomercio.com/WSRotoplas_XML_PDF/" immediate="true" target="_blank" rendered="#{detalle.noFactFiscal != ''}"> -->
									<!-- 										<f:param name="uuid" value="#{detalle.noFactFiscal}" /> -->
									<!-- 										<f:param name="file" value="xml" />								 -->
									<!-- 										<h:graphicImage library="images" name="xmlIcon.gif" /> -->
									<!-- 									</h:outputLink> -->
									<!-- 								</h:column> -->
									<!-- 					  			<h:column> -->
									<!-- 									<f:facet name="header"> -->
									<!-- 										<h:outputText value="#{lblMain.pdf}" /> -->
									<!-- 									</f:facet>                           	 -->
									<!-- 									<h:outputLink value="http://webrotoplas.ekomercio.com/WSRotoplas_XML_PDF/" immediate="true" target="_blank" rendered="#{detalle.noFactFiscal != ''}"> -->
									<!-- 										<f:param name="uuid" value="#{detalle.noFactFiscal}" /> -->
									<!-- 										<f:param name="file" value="pdf" />								 -->
									<!-- 										<h:graphicImage library="images" name="pdfIcon.gif" /> -->
									<!-- 									</h:outputLink>												 -->
									<!-- 								</h:column> -->
								</c:when>
								<c:when test="#{edoCta.estadoCuenta.pais eq 'BR'}">
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.tipoDocumento}" />
										</f:facet>
										<h:outputLabel value="#{detalle.tipoDocumento}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pedido}" />
										</f:facet>
										<h:outputLabel value="#{detalle.ordenCompra}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.noPedido}"
												style="text-align:center;" />
										</f:facet>
										<h:outputLabel value="#{detalle.noPedido}"
											style="text-align:center;" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.factFiscalBR}" />
										</f:facet>
										<h:outputLabel value="#{detalle.notaEntrega}" />
									</h:column>
								</c:when>
								<c:otherwise>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.tipoDocumento}" />
										</f:facet>
										<h:outputLabel value="#{detalle.tipoDocumento}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.noPedido}"
												style="text-align:center;" />
										</f:facet>
										<h:outputLabel value="#{detalle.noPedido}"
											style="text-align:center;" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pedido}" />
										</f:facet>
										<h:outputLabel value="#{detalle.notaEntrega}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.factSAP}" />
										</f:facet>
										<h:outputLabel value="#{detalle.noFactura}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.factFiscal}" />
										</f:facet>
										<h:outputLabel value="#{detalle.noFactFiscal}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.xml}" />
										</f:facet>
										<h:outputLink
											value="http://webrotoplas.ekomercio.com/WSRotoplas_XML_PDF/"
											immediate="true" target="_blank"
											rendered="#{detalle.noFactFiscal != ''}">
											<f:param name="uuid" value="#{detalle.noFactFiscal}" />
											<f:param name="file" value="xml" />
											<h:graphicImage library="images" name="xmlIcon.gif" />
										</h:outputLink>
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.pdf}" />
										</f:facet>
										<h:outputLink
											value="http://webrotoplas.ekomercio.com/WSRotoplas_XML_PDF/"
											immediate="true" target="_blank"
											rendered="#{detalle.noFactFiscal != ''}">
											<f:param name="uuid" value="#{detalle.noFactFiscal}" />
											<f:param name="file" value="pdf" />
											<h:graphicImage library="images" name="pdfIcon.gif" />
										</h:outputLink>
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.facturaRelacionada}" />
										</f:facet>
										<h:outputLabel value="#{detalle.facturaRelacionada}" />
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="#{lblMain.UUIDRelacionado}" />
										</f:facet>
										<h:outputLabel value="#{detalle.UUIDRelacionado}" />
									</h:column>
								</c:otherwise>
							</c:choose>




							<h:column>
								<f:facet name="header">
									<h:outputText value="#{lblMain.fechaFactura}" />
								</f:facet>
								<h:outputLabel for="orderDate" value="#{detalle.fechaFactura}">
									<f:convertDateTime dateStyle="default" />
								</h:outputLabel>
							</h:column>

							<h:column>
								<f:facet name="header">
									<h:outputText value="#{lblMain.vencimiento}" />
								</f:facet>
								<h:outputLabel for="orderDate" value="#{detalle.fechaVenc}">
									<f:convertDateTime dateStyle="default" />
								</h:outputLabel>
							</h:column>

							<h:column>
								<f:facet name="header">
									<h:outputText value="#{lblMain.diasMora}" />
								</f:facet>
								<h:outputLabel value="#{detalle.diasMora}" />
							</h:column>

							<h:column>
								<f:facet name="header">
									<h:outputText value="#{lblMain.importe}" />
								</f:facet>
								<h:outputLabel for="orderImporte"
									value="#{edoCta.getMontoFormateado( detalle.importe )}" />
							</h:column>

							<h:column>
								<f:facet name="header">
									<h:outputText value="#{lblMain.estatus}" />
								</f:facet>

								<h:panelGroup layout="inline"
									style="white-space: nowrap; overflow: hidden;">
									<h:outputText value="#{detalle.estatus}" />
								</h:panelGroup>
							</h:column>
						</h:dataTable>



						<!-- Modal GT-->
						<div class="modal fade" id="myModalGT" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title" id="myModalLabel">Datos Bancarios</h4>
									</div>
									<div class="modal-body">
										<span><b>Banco: </b> G&#38;T CONTINENTAL</span> <br></br> <span><b>Tipo
												de Cuenta: </b> Monetaria</span> <br></br> <span><b>Número
												de cuenta: </b> 056-0711000-0</span> <br></br> <span><b>Nombre
												de la cuenta: </b> TINACOS Y TANQUES DE CENTROAMERICA, S.A.</span> <br></br>
										<br></br> <span><b>Banco: </b> BANRURAL</span> <br></br> <span><b>Tipo
												de Cuenta: </b> Monetaria</span> <br></br> <span><b>Número
												de cuenta: </b> 3-137-06717-5</span> <br></br> <span><b>Nombre
												de la cuenta: </b> TINACOS Y TANQUES DE CENTROAMERICA, S.A.</span>
									</div>
								</div>
							</div>
						</div>
						<!-- Modal SV-->
						<div class="modal fade" id="myModalSV" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title" id="myModalLabel">Datos Bancarios</h4>
									</div>
									<div class="modal-body">
										<span><b>Banco: </b> BANCO DE AMERICA CENTRAL, S.A.</span> <br></br>
										<span><b>Tipo de Cuenta: </b> Corriente</span> <br></br> <span><b>Número
												de cuenta: </b> 200083269</span> <br></br> <span><b>Nombre
												de la cuenta: </b> TINACOS Y TANQUES DE CENTROAMERICA, S.A. DE
											C.V.</span> <br></br>
									</div>
								</div>
							</div>
						</div>
						<!-- Modal HN-->
						<div class="modal fade" id="myModalHN" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title" id="myModalLabel">Datos Bancarios</h4>
									</div>
									<div class="modal-body">
										<span><b>Banco: </b> BANCO DE OCCIDENTE, S.A.</span> <br></br>
										<span><b>Tipo de Cuenta: </b> Corriente Lempiras</span> <br></br>
										<span><b>Número de cuenta: </b> 11-424-000091-5</span> <br></br>
										<span><b>Nombre de la cuenta: </b> TINACOS Y TANQUES DE
											HONDURAS, S.A.</span> <br></br> <br></br> <span><b>Banco:
										</b> BANCO DE OCCIDENTE, S.A.</span> <br></br> <span><b>Tipo
												de Cuenta: </b> Corriente Dólares</span> <br></br> <span><b>Número
												de cuenta: </b> 12-424-000004-1</span> <br></br> <span><b>Nombre
												de la cuenta: </b> TINACOS Y TANQUES DE HONDURAS, S.A.</span>
									</div>
								</div>
							</div>
						</div>
						<!-- Modal NI-->
						<div class="modal fade" id="myModalNI" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title" id="myModalLabel">Datos Bancarios</h4>
									</div>
									<div class="modal-body">
										<span><b>Banco: </b> BANCO DE LA PRODUCCION, S.A.</span> <br></br>
										<span><b>Tipo de Cuenta: </b> Corriente Córdobas</span> <br></br>
										<span><b>Número de cuenta: </b> 10010002781066</span> <br></br>
										<span><b>Nombre de la cuenta: </b> TINACOS Y TANQUES DE
											NICARAGUA, S.A. (TITANSA)</span> <br></br> <br></br> <span><b>Banco:
										</b> BANCO DE LA PRODUCCION, S.A.</span> <br></br> <span><b>Tipo
												de Cuenta: </b> Corriente Dólares</span> <br></br> <span><b>Número
												de cuenta: </b> 10010012781006</span> <br></br> <span><b>Nombre
												de la cuenta: </b> TINACOS Y TANQUES DE NICARAGUA, S.A.
											(TITANSA)</span>
									</div>
								</div>
							</div>
						</div>
						<!-- Modal CR-->
						<div class="modal fade" id="myModalCR" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title" id="myModalLabel">Datos Bancarios</h4>
									</div>
									<div class="modal-body">
										<span><b>Banco: </b> BANCO NACIONAL DE COSTA RICA</span> <br></br>
										<span><b>Tipo de Cuenta: </b> Corriente Colones</span> <br></br>
										<span><b>Número de cuenta: </b> 100-01-000-218792-5</span> <br></br>
										<span><b>Cuenta Cliente (sistema SINPE): </b>
											15100010012187921</span> <br></br> <span><b>Nombre de la
												cuenta: </b> TANQUES PLASTICOS S.A. </span> <br></br> <span><b>IBAN:
										</b> CR67 0151 0001 0012 1879 21 </span> <br></br> <br></br> <span><b>Banco:
										</b> BANCO NACIONAL DE COSTA RICA</span> <br></br> <span><b>Tipo
												de Cuenta: </b> Corriente Dólares</span> <br></br> <span><b>Número
												de cuenta: </b> 100-02-146-600150-8</span> <br></br> <span><b>Cuenta
												Cliente (sistema SINPE): </b> 15114610026001509</span> <br></br> <span><b>Nombre
												de la cuenta: </b> TANQUES PLASTICOS S.A. </span> <br></br> <span><b>IBAN:
										</b> CR15 0151 1461 0026 0015 09</span>
									</div>
								</div>
							</div>
						</div>


					</h:form>


				</h:panelGroup>
			</h:panelGroup>




		</ui:define>

	</ui:composition>

</h:body>

</html>